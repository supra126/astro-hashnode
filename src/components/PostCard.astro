---
import type { PostThumbnail } from '../types';
import { SITE_LANG } from '../lib/client';

interface Props {
  post: PostThumbnail;
}

const { post } = Astro.props;
---

<article class="group overflow-hidden rounded-xl border border-slate-200 transition-shadow hover:shadow-md dark:border-slate-800">
  {post.coverImage?.url && (
    <a href={`/${post.slug}`}>
      <img
        src={post.coverImage.url}
        alt={post.title}
        class="aspect-video w-full object-cover transition-transform group-hover:scale-105"
        loading="lazy"
        decoding="async"
        width="400"
        height="225"
      />
    </a>
  )}
  <div class="p-5">
    <h3 class="font-heading text-lg font-bold leading-snug">
      <a href={`/${post.slug}`} class="hover:text-blue-600 dark:hover:text-blue-400">
        {post.title}
      </a>
    </h3>
    <p class="mt-2 text-sm text-slate-600 dark:text-slate-400 line-clamp-2">
      {post.brief}
    </p>
    <div class="mt-4 flex items-center gap-2 text-xs text-slate-500 dark:text-slate-500">
      {post.author.profilePicture && (
        <img
          src={post.author.profilePicture}
          alt={post.author.name}
          class="h-6 w-6 rounded-full"
          loading="lazy"
          decoding="async"
          width="24"
          height="24"
        />
      )}
      <span class="font-medium">{post.author.name}</span>
      <span>&middot;</span>
      <time datetime={post.publishedAt}>
        {new Date(post.publishedAt).toLocaleDateString(SITE_LANG)}
      </time>
      {post.readTimeInMinutes && (
        <>
          <span>&middot;</span>
          <span>{post.readTimeInMinutes} min</span>
        </>
      )}
    </div>
  </div>
</article>
